<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>{{TITLE}}</title>

    <link rel="stylesheet" href="./css/reveal.css" />
    <link id="theme" rel="stylesheet" href="./css/black.css" />
    <link rel="stylesheet" href="./css/columns.css" />

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="./css/github-dark.css" />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section
          data-markdown="README.md"
          data-separator="^ *<!-- New section --> *\r?\n"
          data-separator-vertical="^ *<!-- New subsection --> *\r?\n"
          data-separator-notes="^> Note:"
        ></section>
      </div>
    </div>

    <script src="./js/reveal.js"></script>
    <script src="./js/notes.js"></script>
    <script src="./js/markdown.js"></script>
    <script src="./js/highlight.js"></script>
    <script src="./js/math.js"></script>
    <script src="./js/menu.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>

    <script>
      function initMermaid() {
        mermaid.initialize({
          startOnLoad: false,
          theme: "dark",
          flowchart: { htmlLabels: false },
        });
        Reveal.addEventListener("ready", (event) => {
          const graphs = document.getElementsByClassName("mermaid");
          graphs.forEach((item, index) => {
            const graphCode = item.textContent.trim();
            const mermaidDiv = document.createElement("div");
            mermaidDiv.classList.add("mermaid");
            mermaidDiv.setAttribute("data-processed", "true");

            try {
              mermaid.mermaidAPI.render(
                "graph-" + index,
                graphCode,
                (svgCode) => (mermaidDiv.innerHTML = svgCode)
              );
              item.parentNode.parentNode.insertBefore(
                mermaidDiv,
                item.parentNode
              );
              item.parentNode.remove();
            } catch (err) {
              console.error(`Cannot render diagram ${index}\n${graphCode}`);
              console.error(err.message);
            }
          });
        });
      }

      if (typeof mermaid !== "undefined") initMermaid();
      Reveal.initialize({
        width: 1280,
        height: 720,
        slideNumber: true,
        hash: true,
        menu: {
          path: "./css",
        },
        plugins: [
          RevealMarkdown,
          RevealHighlight,
          RevealNotes,
          RevealMath.MathJax3,
          RevealMenu,
        ],
      });
    </script>
  </body>
</html>
